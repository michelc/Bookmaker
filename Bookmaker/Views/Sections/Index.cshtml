@model Bookmaker.Models.Travel

@functions
{
    HelperResult OK(Func<dynamic, HelperResult> nugget)
    {
        if (ViewBag.IsUpdatable) {
            return new HelperResult(w => nugget(null).WriteTo(w));
        }
        return new HelperResult(w => w.Write(""));
    }
}

<h2 class="crud">@Html.ActionChildcrud("Parties", "Sections", Model.Travel_ID)</h2>

<table class="sortable sections" data-url='@Url.Action("Sort", "Sections", new { Parent_ID = @Model.Travel_ID })'>
<thead>
    <tr>
        @OK(@<th class="iconwidth"></th>)
        <th>
            N°
        </th>
        <th>
            Contenu
        </th>
        @OK(@<th class="iconwidth"></th>)
    </tr>
</thead>
<tbody>
@foreach (var line in Model.Sections)
{
    <tr>
        @OK(@<td>
            @Html.ActionLink("Modifier", "Edit", "Sections", new { id = line.Section_ID }, new { @class = "edit" })
        </td>)
        <td class="handle" data-pos="@(line.Position - 1)">
            @line.Position
        </td>
        <td>
            @line.ContentAsHtml()
        </td>
        @OK(@<td>
            @Html.ActionLink("Supprimer", "Delete", "Sections", new { id = line.Section_ID }, new { @class = "delete" })
        </td>)
    </tr>
}
</tbody>
@OK(@<tfoot>
    <tr>
        <td></td>
        <td></td>
        <td class='crud'>
            Ajouter
            / @Html.ActionLink("Titre", "Create", "Sections", new { Parent_ID = Model.Travel_ID, Section_Type = 1 }, null)
            / @Html.ActionLink("Texte", "Create", "Sections", new { Parent_ID = Model.Travel_ID, Section_Type = 2 }, null)
            / @Html.ActionLink("Menu", "Create", "Sections", new { Parent_ID = Model.Travel_ID, Section_Type = 3 }, null)
            / @Html.ActionLink("Menu Centré", "Create", "Sections", new { Parent_ID = Model.Travel_ID, Section_Type = 4 }, null)
            / @Html.ActionLink("Image", "Create", "Sections", new { Parent_ID = Model.Travel_ID, Section_Type = 5 }, null)
            / @Html.ActionLink("Tarif", "Create", "Sections", new { Parent_ID = Model.Travel_ID, Section_Type = 6 }, null)
        </td>
        <td></td>
    </tr>
</tfoot>)
</table>
